project {
    exename = pcre

    verbatim(make, top) {
        # This file is generated by MPC (www.ociweb.com)
        # mpc.pl -type make cta.mpc
    }

    verbatim(make, macros) {
        // MPC produces -fPIC and -ldl options for make project type.
        // We remove them here.
        PICFLAGS = ${PICFLAGS:-fPIC:}
        LDLIBS = ${LDLIBS:-ldl:}

        // Flags needed by pcre
        // pcre-config must be accessible by system (<cta root>/pcre/pcre-8.20/bin must be set into path env. var.)
        PLATFORM_PCRE_CPPFLAGS  ?= $(shell pcre-config --cflags)
        PLATFORM_PCRE_LIBS      ?= $(shell pcre-config --libs-cpp)

        // Add pcre flags to std ones
        CPPFLAGS += $(PLATFORM_PCRE_CPPFLAGS)
        LDLIBS += -mthreads $(PLATFORM_PCRE_LIBS)
    }
}
